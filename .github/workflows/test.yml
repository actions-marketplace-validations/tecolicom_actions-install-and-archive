name: test

on:
  push:
    paths-ignore:
      - '**.md'
  pull_request:
  workflow_dispatch:

jobs:
  initial:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: ./
        id: action
        with:
          target: mecab mecab-ipadic-utf8 libmecab-dev
          command: apt-get install
          archive: /tmp/apt-archive.tz
          method: timestamp
          sudo: true
          directory: >-
            /etc
            /usr/bin
            /usr/sbin
            /usr/lib
            /usr/share
            /var/lib
      - run: |
          tar tvfz /tmp/apt-archive.tz \
              etc/alternatives/mecab-dictionary \
              var/lib/mecab/dic/ipadic-utf8/sys.dic
